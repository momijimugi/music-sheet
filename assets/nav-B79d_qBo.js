import{a as e,i as t,o as n,t as r}from"./firebase-DUzmoriO.js";import{C as i,S as a,w as o}from"./index.esm-BYm7NlOb.js";var s=`theme`;function c(){m();let s=document.getElementById(`userPill`),c=document.getElementById(`btnLogin`),l=document.getElementById(`btnLogout`);return c?.addEventListener(`click`,async()=>{await i(r,e)}),l?.addEventListener(`click`,async()=>{await o(r)}),new Promise(e=>{a(r,async i=>{if(await n(i),i&&await t(i.uid)){h(),await o(r),e(null);return}i?(s.textContent=i.email||i.uid,c.style.display=`none`,l.style.display=`inline-block`):(s.textContent=`未ログイン`,c.style.display=`inline-block`,l.style.display=`none`),e(i)})})}function l(){let e=new URL(location.href);return Object.fromEntries(e.searchParams.entries())}function u(){let e=localStorage.getItem(s);return e===`light`||e===`dark`?e:window.matchMedia&&window.matchMedia(`(prefers-color-scheme: dark)`).matches?`dark`:`light`}function d(e){let t=e===`dark`?`dark`:`light`;return document.documentElement.dataset.theme=t,document.documentElement.style.colorScheme=t,t}function f(e){let t=e===`dark`?`dark`:`light`;return localStorage.setItem(s,t),d(t),t}function p(){return f(u()===`dark`?`light`:`dark`)}function m(e=`btnThemeToggle`){let t=document.getElementById(e),n=()=>{let e=document.documentElement.dataset.theme||u();t&&(t.textContent=`テーマ: ${e===`dark`?`ダーク`:`ライト`}`)};d(u()),n(),t&&t.addEventListener(`click`,()=>{let e=p();n(),window.dispatchEvent(new CustomEvent(`themechange`,{detail:e}))})}function h(){let e=`このアカウントは現在ご利用いただけません（利用停止中）。`;alert(e);let t=document.getElementById(`msg`);t&&(t.textContent=e),document.body.style.pointerEvents=`none`,document.body.style.opacity=`0.6`}function g({current:e=``,projectId:t=``,hideAdmin:n=!1}={}){let r=document.getElementById(`nav`);if(!r)return;let i=l(),a=window.self!==window.top,o=localStorage.getItem(`lastProject`)||``,s=t||i.project||o,c=(t,n)=>`<button type="button" class="navBtn${e===t?` active`:``}" data-go="${t}">${n}</button>`;r.innerHTML=[c(`home`,`Home`),c(`account`,`Account`),c(`portal`,`Portal`),c(`sheet`,`Music Sheet`),n?``:c(`admin`,`Admin`)].filter(Boolean).join(``),r.addEventListener(`click`,e=>{let t=e.target.closest(`button[data-go]`);if(!t)return;e.preventDefault(),e.stopPropagation();let n=t.dataset.go,r=`/music-sheet/`+(n===`home`?`index.html`:n===`signup`?`signup.html`:n===`account`?`account.html`:n===`pricing`?`pricing.html`:n===`admin`?`admin.html`:n===`portal`?`portal.html`:`sheet.html`),i=s;if(n===`portal`||n===`sheet`){if(!i&&(i=prompt(`プロジェクトIDを入力して開くよ（例：invisible-half）`)?.trim(),!i))return;localStorage.setItem(`lastProject`,i),r+=`?project=${encodeURIComponent(i)}`}(a?window.top:window).location.href=r},!0)}export{c as a,m as i,l as n,u as r,g as t};