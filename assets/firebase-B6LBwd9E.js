import{A as e,C as t,b as n,d as r,o as i,p as a,r as o,u as s,v as c,w as l,y as u}from"./index.esm-B0-OTnKT.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();const d=e({apiKey:`AIzaSyCCp7D78NDqKR2c8cbb29BUUE_5qBOaI_U`,authDomain:`msheet-b7efc.firebaseapp.com`,projectId:`msheet-b7efc`,storageBucket:`sheet-b7efc.firebasestorage.app`,messagingSenderId:`398789467878`,appId:`1:398789467878:web:67a33361881568c6b96527`}),f=l(d),p=a(d),m=new t;async function h(e){if(!e?.uid)return;let t=s(p,`users`,e.uid),i=await r(t),a=e.email||``,o=a.trim().toLowerCase();i.exists()?await n(t,{lastSeenAt:c(),email:a,emailNorm:o,displayName:e.displayName||null}):await u(t,{email:a,emailNorm:o,displayName:e.displayName||null,status:`active`,roleGlobal:`user`,createdAt:c(),lastSeenAt:c()})}async function g(e){if(!e)return!1;let t=await r(s(p,`users`,e));return(t.exists()?t.data():null)?.status===`banned`}async function _({name:e,user:t}){let n=await o(i(p,`projects`),{name:e.trim(),ownerUid:t.uid,createdAt:c(),createdBy:t.uid,updatedAt:c(),updatedBy:t.uid});return await u(s(p,`projects`,n.id,`members`,t.uid),{role:`owner`,uid:t.uid,email:t.email||null,displayName:t.displayName||null,createdAt:c(),createdBy:t.uid}),n.id}export{m as a,g as i,_ as n,h as o,p as r,f as t};